generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = "mysql://root:senai@127.0.0.1:3306/auth_db"
}

model User {
  id       Int       @id @default(autoincrement())
  name     String
  email    String    @unique
  password String
  tokens   Token[]
  produtos Produto[]
}

model Produto {
  id        String   @id @default(uuid())
  nome      String
  descricao String?
  preco     Decimal  @db.Decimal(10, 2)
  status    Status   @default(DISPONIVEL)
  estoque   Int
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  userId    Int
  user      User     @relation(fields: [userId], references: [id])

  @@map("produtos")
}


model Pedido {
  id        Int              @id @default(autoincrement())
  createdAt DateTime         @default(now())
  updatedAt DateTime         @updatedAt
  status    PedidoStatus     @default(ABERTO)
  userId    Int
  user      User             @relation(fields: [userId], references: [id])
  produtos  PedidoProduto[]  // relação N:N com Produto via PedidoProduto
}

model Token {
  id        Int      @id @default(autoincrement())
  value     String
  type      String
  userId    Int
  expiresAt DateTime
  user      User     @relation(fields: [userId], references: [id])
}

enum Status {
  DISPONIVEL
  EM_FALTA
}
